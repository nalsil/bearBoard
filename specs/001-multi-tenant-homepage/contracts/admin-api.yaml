openapi: 3.0.3
info:
  title: 멀티테넌트 기업용 홈페이지 - 관리자 API
  description: 관리자 및 슈퍼유저가 컨텐츠를 관리하는 API
  version: 1.0.0
servers:
  - url: https://example.com/admin
    description: 프로덕션 서버
  - url: http://localhost:8080/admin
    description: 개발 서버

tags:
  - name: Auth
    description: 인증 관리
  - name: Dashboard
    description: 대시보드
  - name: Board Management
    description: 게시판 관리
  - name: FAQ Management
    description: FAQ 관리
  - name: QnA Management
    description: QnA 관리
  - name: YouTube Management
    description: 유튜브 영상 관리
  - name: Product Management
    description: 상품 관리

paths:
  /login:
    get:
      tags:
        - Auth
      summary: 로그인 페이지
      description: 관리자 로그인 폼을 렌더링한다.
      operationId: getLoginPage
      responses:
        '200':
          description: HTML 페이지 반환
          content:
            text/html:
              schema:
                type: string

    post:
      tags:
        - Auth
      summary: 로그인 처리
      description: 관리자 로그인을 처리하고 세션을 생성한다.
      operationId: login
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - username
                - password
              properties:
                username:
                  type: string
                  description: 로그인 아이디
                  example: admin-a
                password:
                  type: string
                  format: password
                  description: 비밀번호
                  example: password123
      responses:
        '302':
          description: 로그인 성공, 대시보드로 리다이렉트
        '401':
          description: 인증 실패
          content:
            text/html:
              schema:
                type: string

  /logout:
    post:
      tags:
        - Auth
      summary: 로그아웃
      description: 관리자 세션을 무효화한다.
      operationId: logout
      responses:
        '302':
          description: 로그아웃 성공, 로그인 페이지로 리다이렉트

  /dashboard:
    get:
      tags:
        - Dashboard
      summary: 관리자 대시보드
      description: 관리자 대시보드를 렌더링한다. 슈퍼유저는 기업 선택 드롭다운이 표시된다.
      operationId: getDashboard
      security:
        - sessionAuth: []
      responses:
        '200':
          description: HTML 페이지 반환
          content:
            text/html:
              schema:
                type: string
        '401':
          description: 인증되지 않음
        '403':
          description: 권한 없음

  /boards:
    get:
      tags:
        - Board Management
      summary: 게시판 목록 조회
      description: 현재 관리 중인 기업의 게시판 목록을 조회한다.
      operationId: getAdminBoardList
      security:
        - sessionAuth: []
      responses:
        '200':
          description: HTML 페이지 반환
          content:
            text/html:
              schema:
                type: string
        '401':
          description: 인증되지 않음

  /boards/{boardId}/posts:
    get:
      tags:
        - Board Management
      summary: 게시글 목록 조회
      description: 특정 게시판의 게시글 목록을 조회한다. 숨김 처리된 글도 표시된다.
      operationId: getAdminPostList
      security:
        - sessionAuth: []
      parameters:
        - name: boardId
          in: path
          required: true
          description: 게시판 ID
          schema:
            type: integer
            format: int64
            example: 1
        - name: page
          in: query
          description: 페이지 번호
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          description: 페이지 크기
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: HTML 페이지 반환
          content:
            text/html:
              schema:
                type: string
        '401':
          description: 인증되지 않음
        '403':
          description: 권한 없음

    post:
      tags:
        - Board Management
      summary: 게시글 등록
      description: 새로운 게시글을 등록한다.
      operationId: createPost
      security:
        - sessionAuth: []
      parameters:
        - name: boardId
          in: path
          required: true
          description: 게시판 ID
          schema:
            type: integer
            format: int64
            example: 1
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - title
                - content
              properties:
                title:
                  type: string
                  description: 게시글 제목
                  example: 새로운 공지사항
                content:
                  type: string
                  description: 게시글 내용
                  example: 새로운 공지사항의 내용입니다.
                file:
                  type: string
                  format: binary
                  description: 첨부 파일 (선택, 최대 20MB)
                isHidden:
                  type: boolean
                  description: 숨김 여부
                  default: false
      responses:
        '302':
          description: 게시글 등록 성공, 목록 페이지로 리다이렉트
        '400':
          description: 입력 검증 실패
        '401':
          description: 인증되지 않음
        '403':
          description: 권한 없음

  /boards/{boardId}/posts/{postId}:
    get:
      tags:
        - Board Management
      summary: 게시글 수정 폼
      description: 게시글 수정 폼을 렌더링한다.
      operationId: getEditPostForm
      security:
        - sessionAuth: []
      parameters:
        - name: boardId
          in: path
          required: true
          description: 게시판 ID
          schema:
            type: integer
            format: int64
        - name: postId
          in: path
          required: true
          description: 게시글 ID
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: HTML 페이지 반환
          content:
            text/html:
              schema:
                type: string
        '401':
          description: 인증되지 않음
        '403':
          description: 권한 없음
        '404':
          description: 게시글을 찾을 수 없음

    put:
      tags:
        - Board Management
      summary: 게시글 수정
      description: 기존 게시글을 수정한다.
      operationId: updatePost
      security:
        - sessionAuth: []
      parameters:
        - name: boardId
          in: path
          required: true
          description: 게시판 ID
          schema:
            type: integer
            format: int64
        - name: postId
          in: path
          required: true
          description: 게시글 ID
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - title
                - content
              properties:
                title:
                  type: string
                  description: 게시글 제목
                content:
                  type: string
                  description: 게시글 내용
                file:
                  type: string
                  format: binary
                  description: 첨부 파일 (선택)
                isHidden:
                  type: boolean
                  description: 숨김 여부
      responses:
        '302':
          description: 게시글 수정 성공, 목록 페이지로 리다이렉트
        '400':
          description: 입력 검증 실패
        '401':
          description: 인증되지 않음
        '403':
          description: 권한 없음
        '404':
          description: 게시글을 찾을 수 없음

    delete:
      tags:
        - Board Management
      summary: 게시글 삭제
      description: 게시글을 삭제한다.
      operationId: deletePost
      security:
        - sessionAuth: []
      parameters:
        - name: boardId
          in: path
          required: true
          description: 게시판 ID
          schema:
            type: integer
            format: int64
        - name: postId
          in: path
          required: true
          description: 게시글 ID
          schema:
            type: integer
            format: int64
      responses:
        '302':
          description: 게시글 삭제 성공, 목록 페이지로 리다이렉트
        '401':
          description: 인증되지 않음
        '403':
          description: 권한 없음
        '404':
          description: 게시글을 찾을 수 없음

  /faqs:
    get:
      tags:
        - FAQ Management
      summary: FAQ 목록 조회
      description: 현재 관리 중인 기업의 FAQ 목록을 조회한다.
      operationId: getAdminFaqList
      security:
        - sessionAuth: []
      responses:
        '200':
          description: HTML 페이지 반환
          content:
            text/html:
              schema:
                type: string
        '401':
          description: 인증되지 않음

    post:
      tags:
        - FAQ Management
      summary: FAQ 등록
      description: 새로운 FAQ를 등록한다.
      operationId: createFaq
      security:
        - sessionAuth: []
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - category
                - question
                - answer
              properties:
                category:
                  type: string
                  description: 카테고리
                  example: 일반
                question:
                  type: string
                  description: 질문
                  example: 영업 시간은 어떻게 되나요?
                answer:
                  type: string
                  description: 답변
                  example: 평일 오전 9시부터 오후 6시까지입니다.
                displayOrder:
                  type: integer
                  description: 정렬 순서
                  default: 0
                isHidden:
                  type: boolean
                  description: 숨김 여부
                  default: false
      responses:
        '302':
          description: FAQ 등록 성공, 목록 페이지로 리다이렉트
        '400':
          description: 입력 검증 실패
        '401':
          description: 인증되지 않음

  /faqs/{faqId}:
    put:
      tags:
        - FAQ Management
      summary: FAQ 수정
      description: 기존 FAQ를 수정한다.
      operationId: updateFaq
      security:
        - sessionAuth: []
      parameters:
        - name: faqId
          in: path
          required: true
          description: FAQ ID
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - category
                - question
                - answer
              properties:
                category:
                  type: string
                question:
                  type: string
                answer:
                  type: string
                displayOrder:
                  type: integer
                isHidden:
                  type: boolean
      responses:
        '302':
          description: FAQ 수정 성공, 목록 페이지로 리다이렉트
        '401':
          description: 인증되지 않음
        '404':
          description: FAQ를 찾을 수 없음

    delete:
      tags:
        - FAQ Management
      summary: FAQ 삭제
      description: FAQ를 삭제한다.
      operationId: deleteFaq
      security:
        - sessionAuth: []
      parameters:
        - name: faqId
          in: path
          required: true
          description: FAQ ID
          schema:
            type: integer
            format: int64
      responses:
        '302':
          description: FAQ 삭제 성공, 목록 페이지로 리다이렉트
        '401':
          description: 인증되지 않음
        '404':
          description: FAQ를 찾을 수 없음

  /qnas:
    get:
      tags:
        - QnA Management
      summary: QnA 목록 조회
      description: 현재 관리 중인 기업의 QnA 목록을 조회한다.
      operationId: getAdminQnaList
      security:
        - sessionAuth: []
      parameters:
        - name: answered
          in: query
          description: 답변 완료 여부 필터
          schema:
            type: boolean
      responses:
        '200':
          description: HTML 페이지 반환
          content:
            text/html:
              schema:
                type: string
        '401':
          description: 인증되지 않음

  /qnas/{qnaId}/answer:
    post:
      tags:
        - QnA Management
      summary: QnA 답변 등록
      description: QnA에 대한 답변을 등록한다.
      operationId: answerQna
      security:
        - sessionAuth: []
      parameters:
        - name: qnaId
          in: path
          required: true
          description: QnA ID
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - answerBody
              properties:
                answerBody:
                  type: string
                  description: 답변 내용
                  example: 상담 일정을 조율하겠습니다. 곧 연락드리겠습니다.
      responses:
        '302':
          description: 답변 등록 성공, 목록 페이지로 리다이렉트
        '400':
          description: 입력 검증 실패
        '401':
          description: 인증되지 않음
        '404':
          description: QnA를 찾을 수 없음

  /qnas/{qnaId}:
    delete:
      tags:
        - QnA Management
      summary: QnA 삭제 (숨김 처리)
      description: QnA를 숨김 처리한다.
      operationId: deleteQna
      security:
        - sessionAuth: []
      parameters:
        - name: qnaId
          in: path
          required: true
          description: QnA ID
          schema:
            type: integer
            format: int64
      responses:
        '302':
          description: QnA 삭제 성공, 목록 페이지로 리다이렉트
        '401':
          description: 인증되지 않음
        '404':
          description: QnA를 찾을 수 없음

  /videos:
    get:
      tags:
        - YouTube Management
      summary: 유튜브 영상 목록 조회
      description: 현재 관리 중인 기업의 유튜브 영상 목록을 조회한다.
      operationId: getAdminVideoList
      security:
        - sessionAuth: []
      responses:
        '200':
          description: HTML 페이지 반환
          content:
            text/html:
              schema:
                type: string
        '401':
          description: 인증되지 않음

    post:
      tags:
        - YouTube Management
      summary: 유튜브 영상 등록
      description: 새로운 유튜브 영상을 등록한다. URL에서 썸네일과 제목을 자동으로 가져온다.
      operationId: createVideo
      security:
        - sessionAuth: []
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - videoUrl
              properties:
                videoUrl:
                  type: string
                  description: 유튜브 영상 URL
                  example: https://www.youtube.com/watch?v=dQw4w9WgXcQ
                title:
                  type: string
                  description: 영상 제목 (선택, 자동으로 가져옴)
                description:
                  type: string
                  description: 영상 설명
                displayOrder:
                  type: integer
                  description: 정렬 순서
                  default: 0
                isHidden:
                  type: boolean
                  description: 숨김 여부
                  default: false
      responses:
        '302':
          description: 영상 등록 성공, 목록 페이지로 리다이렉트
        '400':
          description: 입력 검증 실패 또는 잘못된 URL
        '401':
          description: 인증되지 않음

  /videos/{videoId}:
    put:
      tags:
        - YouTube Management
      summary: 유튜브 영상 수정
      description: 기존 유튜브 영상 정보를 수정한다.
      operationId: updateVideo
      security:
        - sessionAuth: []
      parameters:
        - name: videoId
          in: path
          required: true
          description: 영상 ID
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
                displayOrder:
                  type: integer
                isHidden:
                  type: boolean
      responses:
        '302':
          description: 영상 수정 성공, 목록 페이지로 리다이렉트
        '401':
          description: 인증되지 않음
        '404':
          description: 영상을 찾을 수 없음

    delete:
      tags:
        - YouTube Management
      summary: 유튜브 영상 삭제
      description: 유튜브 영상을 삭제한다.
      operationId: deleteVideo
      security:
        - sessionAuth: []
      parameters:
        - name: videoId
          in: path
          required: true
          description: 영상 ID
          schema:
            type: integer
            format: int64
      responses:
        '302':
          description: 영상 삭제 성공, 목록 페이지로 리다이렉트
        '401':
          description: 인증되지 않음
        '404':
          description: 영상을 찾을 수 없음

  /products:
    get:
      tags:
        - Product Management
      summary: 상품 목록 조회
      description: 현재 관리 중인 기업의 상품 목록을 조회한다.
      operationId: getAdminProductList
      security:
        - sessionAuth: []
      responses:
        '200':
          description: HTML 페이지 반환
          content:
            text/html:
              schema:
                type: string
        '401':
          description: 인증되지 않음

    post:
      tags:
        - Product Management
      summary: 상품 등록
      description: 새로운 상품을 등록한다.
      operationId: createProduct
      security:
        - sessionAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  description: 상품명
                  example: IT 컨설팅 서비스
                category:
                  type: string
                  description: 카테고리
                  example: IT 서비스
                description:
                  type: string
                  description: 상품 설명
                price:
                  type: number
                  format: decimal
                  description: 가격
                  example: 5000000.00
                imageFile:
                  type: string
                  format: binary
                  description: 상품 이미지 (선택)
                displayOrder:
                  type: integer
                  description: 정렬 순서
                  default: 0
                isHidden:
                  type: boolean
                  description: 숨김 여부
                  default: false
      responses:
        '302':
          description: 상품 등록 성공, 목록 페이지로 리다이렉트
        '400':
          description: 입력 검증 실패
        '401':
          description: 인증되지 않음

  /products/{productId}:
    put:
      tags:
        - Product Management
      summary: 상품 수정
      description: 기존 상품 정보를 수정한다.
      operationId: updateProduct
      security:
        - sessionAuth: []
      parameters:
        - name: productId
          in: path
          required: true
          description: 상품 ID
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                category:
                  type: string
                description:
                  type: string
                price:
                  type: number
                  format: decimal
                imageFile:
                  type: string
                  format: binary
                displayOrder:
                  type: integer
                isHidden:
                  type: boolean
      responses:
        '302':
          description: 상품 수정 성공, 목록 페이지로 리다이렉트
        '401':
          description: 인증되지 않음
        '404':
          description: 상품을 찾을 수 없음

    delete:
      tags:
        - Product Management
      summary: 상품 삭제
      description: 상품을 삭제한다.
      operationId: deleteProduct
      security:
        - sessionAuth: []
      parameters:
        - name: productId
          in: path
          required: true
          description: 상품 ID
          schema:
            type: integer
            format: int64
      responses:
        '302':
          description: 상품 삭제 성공, 목록 페이지로 리다이렉트
        '401':
          description: 인증되지 않음
        '404':
          description: 상품을 찾을 수 없음

  /company/select:
    post:
      tags:
        - Dashboard
      summary: 관리 대상 기업 선택 (슈퍼유저 전용)
      description: 슈퍼유저가 관리할 기업을 선택한다. 세션에 선택된 기업 ID를 저장한다.
      operationId: selectCompany
      security:
        - sessionAuth: []
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - companyId
              properties:
                companyId:
                  type: integer
                  format: int64
                  description: 선택할 기업 ID
                  example: 1
      responses:
        '302':
          description: 기업 선택 성공, 대시보드로 리다이렉트
        '400':
          description: 잘못된 요청
        '401':
          description: 인증되지 않음
        '403':
          description: 슈퍼유저 권한 필요

components:
  securitySchemes:
    sessionAuth:
      type: apiKey
      in: cookie
      name: JSESSIONID
      description: 세션 기반 인증

  schemas:
    ErrorResponse:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
        status:
          type: integer
        error:
          type: string
        message:
          type: string
        path:
          type: string
